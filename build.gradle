buildscript {
    ext.ibm_mq_version = '9.0.4.0'
    ext.kotlin_version = '1.2.21'
    ext.junit_version = '4.12'

    repositories {
        mavenCentral()
        jcenter()
        maven {
            name "JCenter Gradle Plugins"
            url  "https://dl.bintray.com/gradle/gradle-plugins"
        }

        maven {
            name "Gradle plugin portal"
            url "https://plugins.gradle.org/m2/"
        }

    }
    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version"
        classpath "gradle.plugin.com.ewerk.gradle.plugins:jaxb2-plugin:1.0.7"
    }
}

group 'no.nav.legeerklaering'
version '1.0-SNAPSHOT'

apply plugin: 'kotlin'
apply plugin: "com.ewerk.gradle.plugins.jaxb2"

sourceSets {
    generated {
        java.srcDir 'src/generated/java/'
    }
}

compileKotlin {
    dependsOn generateJaxb2Classes
    source sourceSets.generated.java
}

jaxb2 {
    xjc {
        'legeerklaering' {
            basePackage = 'no.nav.model.legeerklaering'
            schema = 'src/main/resources/xsd/NAV-Legeerklaring-2008-06-06.xsd'
            encoding = 'UTF-8'
        }

        'fellesformat' {
            basePackage = 'no.nav.model.fellesformat'
            schema = 'src/main/resources/xsd/Fellesformat_1.0.xsd'
            encoding = 'UTF-8'
            includedBindingFiles = "binding.xjb"
            bindingsDir = 'src/main/resources'
            extension = true
        }
    }
}

repositories {
    mavenCentral()
    maven {
        url 'https://repo.adeo.no/repository/maven-releases/'
    }
    maven {
        url 'https://repo.adeo.no/repository/maven-snapshots/'
    }
}

dependencies {
    compile "no.nav.tjenester:nav-person-v3-tjenestespesifikasjon:3.2.0"
    compile "com.ibm.mq:com.ibm.mq.allclient:$ibm_mq_version"

    compile "com.fasterxml.jackson.module:jackson-module-jaxb-annotations:2.9.5"
    compile "com.fasterxml.jackson.dataformat:jackson-dataformat-xml:2.9.5"

    compile "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$kotlin_version"
    testImplementation "junit:junit:$junit_version"
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}